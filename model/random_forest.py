from sklearn.datasets import load_iris
from sklearn.ensemble import RandomForestClassifier
import pandas as pd
import numpy as np

genres_nothot = np.loadtxt("../data/single_num_genre_tags.txt")

na_train = np.array(np.loadtxt("../data/batches/batch_1.txt"), dtype="float32")
na_test = np.array(np.loadtxt("../data/batches/batch_24.txt"), dtype="float32")

for i in range(2, 24):
    data = np.loadtxt(("../data/batches/batch_%(i)s.txt" % locals()))
    na_train = np.concatenate((na_train, data))

for i in range(25, 29):
    data = np.loadtxt(("../data/batches/batch_%(i)s.txt" % locals()))
    na_test = np.concatenate((na_test, data))

labels_train_nothot = np.array(genres_nothot[0:len(na_train)], dtype="int32")
labels_test_nothot = np.array(genres_nothot[len(na_train):], dtype="int32")


features_array =  [
0.03421846300369623,
0.10080541333420114,
3.1374571867140078,
0.14664543512755418,
0.17294184032424836,
0.2322902224764339,
0.0001960503162030187,
0.013987906273620558,
-18.57214235666178,
1.8151795309677587,
0.3854667702020273,
0.8007507303696706,
0.3858874294882509,
0.32789601004996993,
0.02403670010429698,
0.04367351794765528,
0.1447475362991624,
-0.061069643651691694,
0.0713783979945945,
0.011882464986056307,
-0.11408507500131497,
0.0005211927723670626,
0.00028776269449647384,
0.0005788017231891908,
0.0009002693104597333,
0.006644432426530253,
0.00149872955470124,
0.0004947309230429656,
0.00020950166462452435,
0.000483126554768543,
0.0004997775479944681,
0.0010449575616269468,
0.002635357816696104,
0.0019151472350702455,
0.00749240404873382,
0.009850246201251106,
0.046505676066258626,
0.012089251631190744,
0.006964556034758843,
0.07780279285252618,
0.000085933935649507,
0.010058323606745582,
0.14919358370483832,
0.22978471442266982,
0.11360788679515241,
0.07289593237880904,
0.1056156349368484,
0.06603600239504562,
0.06320822497648919,
0.048989373533784845,
0.056065813792590805,
0.047488450450749384,
0.06169108096437205,
0.047207232094235045,
0.057482714583937576,
0.0003916658440227832,
0.00018175277582198644,
0.0002751167211967061,
0.000369454250605001,
0.004083553147502974,
0.0007062335723815382,
0.0003638120745944016,
0.00012550670024668377,
0.00038208064927993177,
0.0003528232815326377,
0.0008061200195864959,
0.0019966518508080064,
0.0010139801775892424,
150
]

single_song_features = np.array(features_array, dtype='int32')

print (len(na_train))
print (len(labels_train_nothot))
print (len(na_test))
print (len(labels_test_nothot))

classifications = []

for i in range(0, 20):
    clf = RandomForestClassifier(n_jobs=2)
    clf.fit(na_train, labels_train_nothot)
    preds = clf.predict(single_song_features)
    print("hellloooooooooooooo")
    print (preds)
    print("hellloooooooooooooo")
    classifications.append(preds[0])

print (classifications)

# print (pd.crosstab(labels_test_nothot, preds, rownames=['actual'], colnames=['preds']))
